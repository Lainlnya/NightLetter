FROM gradle:jdk17-alpine AS BUILD
WORKDIR /home/gradle/src/

COPY --chown=gradle:gradle . /home/gradle/src/
USER root
RUN chown -R gradle /home/gradle/src/

COPY ./back-end .
RUN ./gradlew clean build

FROM eclipse-temurin:17-jdk-alpine

COPY --from=BUILD /home/gradle/src//build/libs/*.jar  /app.jar

ENTRYPOINT ["java","-jar","/app.jar"]
